# PG-3396: Web - Permisos de Trabajo (Alta de Permisos de Trabajo - Buscador interno en listas desplegables)

**Ambiente de pruebas: test 2**

---

## TC-001: Verificar visualización del buscador interno en campo Planta

**ID:** TC-001  
**Título del Caso:** Verificar que el buscador interno se visualiza al abrir el desplegable del campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Localizar el campo "Planta" usando `getByLabel('Planta')` o `getByRole('combobox', { name: /planta/i })`
  3. Hacer clic en el desplegable del campo Planta
  4. Verificar que aparece un campo de búsqueda interno dentro del desplegable
- **Validación:** El campo de búsqueda interno debe estar visible (`expect(locator).toBeVisible()`)

---

## TC-002: Verificar visualización del buscador interno en campo Provincia

**ID:** TC-002  
**Título del Caso:** Verificar que el buscador interno se visualiza al abrir el desplegable del campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Localizar el campo "Provincia" usando `getByLabel('Provincia')` o `getByRole('combobox', { name: /provincia/i })`
  3. Hacer clic en el desplegable del campo Provincia
  4. Verificar que aparece un campo de búsqueda interno dentro del desplegable
- **Validación:** El campo de búsqueda interno debe estar visible (`expect(locator).toBeVisible()`)

---

## TC-003: Filtrado inmediato de opciones al escribir en campo Planta

**ID:** TC-003  
**Título del Caso:** Verificar que el filtrado de opciones se actualiza inmediatamente mientras el usuario escribe en el campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Contar el número inicial de opciones visibles
  4. Ingresar texto parcial (ej: primeras letras de una planta conocida) en el buscador interno usando `type()`
  5. Verificar que las opciones se filtran mostrando solo las que coinciden con el texto ingresado
- **Validación:** El número de opciones visibles debe ser menor que el inicial y todas deben contener el texto ingresado

---

## TC-004: Filtrado inmediato de opciones al escribir en campo Provincia

**ID:** TC-004  
**Título del Caso:** Verificar que el filtrado de opciones se actualiza inmediatamente mientras el usuario escribe en el campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Contar el número inicial de opciones visibles
  4. Ingresar texto parcial (ej: "Buenos" para "Buenos Aires") en el buscador interno usando `type()`
  5. Verificar que las opciones se filtran mostrando solo las que coinciden con el texto ingresado
- **Validación:** El número de opciones visibles debe ser menor que el inicial y todas deben contener el texto ingresado

---

## TC-005: Selección de opción filtrada en campo Planta

**ID:** TC-005  
**Título del Caso:** Verificar que el usuario puede seleccionar una opción después de filtrar en el campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Ingresar texto en el buscador interno para filtrar opciones
  4. Hacer clic en una de las opciones filtradas usando `getByRole('option', { name: /texto/i }).click()`
  5. Verificar que el campo Planta muestra el valor seleccionado
- **Validación:** El campo debe mostrar la opción seleccionada y el desplegable debe cerrarse

---

## TC-006: Selección de opción filtrada en campo Provincia

**ID:** TC-006  
**Título del Caso:** Verificar que el usuario puede seleccionar una opción después de filtrar en el campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Ingresar texto en el buscador interno para filtrar opciones
  4. Hacer clic en una de las opciones filtradas usando `getByRole('option', { name: /texto/i }).click()`
  5. Verificar que el campo Provincia muestra el valor seleccionado
- **Validación:** El campo debe mostrar la opción seleccionada y el desplegable debe cerrarse

---

## TC-007: Mensaje cuando no hay resultados en campo Planta

**ID:** TC-007  
**Título del Caso:** Verificar que el sistema informa cuando no hay resultados en el filtrado del campo Planta  
**Tipo:** Negativo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Ingresar texto que no coincida con ninguna opción disponible (ej: "XXXZZZ123")
  4. Verificar que aparece un mensaje indicando que no hay resultados
- **Validación:** Debe aparecer un mensaje visible indicando "No hay resultados" o similar (`expect(locator).toContainText(/no hay resultados|no se encontraron/i)`)

---

## TC-008: Mensaje cuando no hay resultados en campo Provincia

**ID:** TC-008  
**Título del Caso:** Verificar que el sistema informa cuando no hay resultados en el filtrado del campo Provincia  
**Tipo:** Negativo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Ingresar texto que no coincida con ninguna opción disponible (ej: "XXXZZZ123")
  4. Verificar que aparece un mensaje indicando que no hay resultados
- **Validación:** Debe aparecer un mensaje visible indicando "No hay resultados" o similar (`expect(locator).toContainText(/no hay resultados|no se encontraron/i)`)

---

## TC-009: Coincidencias parciales en campo Planta

**ID:** TC-009  
**Título del Caso:** Verificar que el buscador muestra opciones que coinciden parcialmente con el texto ingresado en campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Ingresar solo las primeras letras de un nombre conocido (ej: primeras 2-3 letras)
  4. Verificar que se muestran todas las opciones que contienen esas letras (no solo las que empiezan con ellas)
- **Validación:** Las opciones mostradas deben contener el texto ingresado en cualquier parte del nombre

---

## TC-010: Coincidencias parciales en campo Provincia

**ID:** TC-010  
**Título del Caso:** Verificar que el buscador muestra opciones que coinciden parcialmente con el texto ingresado en campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Ingresar solo parte de un nombre conocido (ej: "Cor" para "Córdoba")
  4. Verificar que se muestran todas las opciones que contienen esas letras
- **Validación:** Las opciones mostradas deben contener el texto ingresado en cualquier parte del nombre

---

## TC-011: Limpiar texto del buscador en campo Planta

**ID:** TC-011  
**Título del Caso:** Verificar que al limpiar el texto del buscador se muestran nuevamente todas las opciones en campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Ingresar texto en el buscador interno para filtrar opciones
  4. Verificar que las opciones están filtradas
  5. Borrar todo el texto del buscador (seleccionar todo y presionar Delete o Backspace)
  6. Verificar que se muestran nuevamente todas las opciones disponibles
- **Validación:** El número de opciones visibles debe volver a ser el total original

---

## TC-012: Limpiar texto del buscador en campo Provincia

**ID:** TC-012  
**Título del Caso:** Verificar que al limpiar el texto del buscador se muestran nuevamente todas las opciones en campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Ingresar texto en el buscador interno para filtrar opciones
  4. Verificar que las opciones están filtradas
  5. Borrar todo el texto del buscador (seleccionar todo y presionar Delete o Backspace)
  6. Verificar que se muestran nuevamente todas las opciones disponibles
- **Validación:** El número de opciones visibles debe volver a ser el total original

---

## TC-013: Comportamiento del formulario no se modifica tras usar buscador

**ID:** TC-013  
**Título del Caso:** Verificar que el comportamiento del formulario se mantiene sin cambios después de usar el buscador interno  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Completar el campo Planta usando el buscador interno
  3. Completar el campo Provincia usando el buscador interno
  4. Verificar que ambos campos muestran los valores seleccionados correctamente
  5. Continuar completando otros campos del formulario
  6. Verificar que el flujo habitual del formulario no ha sido modificado
- **Validación:** El formulario debe funcionar normalmente y permitir completar el resto de campos sin errores

---

## TC-014: Filtrado case-insensitive en campo Planta

**ID:** TC-014  
**Título del Caso:** Verificar que el filtrado no distingue entre mayúsculas y minúsculas en campo Planta  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Planta"
  3. Ingresar texto en minúsculas (ej: "planta")
  4. Verificar que se muestran opciones que contienen "PLANTA", "Planta", "planta", etc.
  5. Limpiar el buscador
  6. Ingresar el mismo texto en MAYÚSCULAS
  7. Verificar que se obtienen los mismos resultados
- **Validación:** Los resultados del filtrado deben ser idénticos independientemente del uso de mayúsculas/minúsculas

---

## TC-015: Filtrado case-insensitive en campo Provincia

**ID:** TC-015  
**Título del Caso:** Verificar que el filtrado no distingue entre mayúsculas y minúsculas en campo Provincia  
**Tipo:** Positivo  

**Prompt para Agente (Instrucciones Atómicas):**
- **Precondición:** Usuario autenticado con acceso al módulo Permisos de Trabajo
- **Pasos:**
  1. Navegar a la sección Alta de Permisos de Trabajo
  2. Abrir el desplegable del campo "Provincia"
  3. Ingresar texto en minúsculas (ej: "buenos")
  4. Verificar que se muestran opciones que contienen "BUENOS", "Buenos", "buenos", etc.
  5. Limpiar el buscador
  6. Ingresar el mismo texto en MAYÚSCULAS
  7. Verificar que se obtienen los mismos resultados
- **Validación:** Los resultados del filtrado deben ser idénticos independientemente del uso de mayúsculas/minúsculas
