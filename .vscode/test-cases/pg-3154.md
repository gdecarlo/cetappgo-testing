# Suite de Casos de Prueba – Web  
## Alta y Gestión de Programación de Inspección (PG-3154 / Parent PG-3139)

> Archivo preparado para usar como insumo directo de prompts para un Agente de Playwright.

| ID Caso | Nombre del Caso | Objetivo | Prompt para Playwright (Instrucción para el Agente) |
| :--- | :--- | :--- | :--- |
| TC-001 | Alta exitosa de Programación de Inspección con todos los campos obligatorios mínimos | Verificar que un usuario con permiso **“Programar Inspecciones”** pueda dar de alta una nueva programación de inspección completando solo los campos obligatorios y que la programación se muestre correctamente en el calendario. | **Precondiciones:** El usuario tiene el permiso **“Programar Inspecciones”** y está logueado en el ambiente **CetApp GO - Test 1**. Existe al menos una combinación válida de **Jerarquía Nivel 1**, **Jerarquía Nivel 2**, **Jerarquía Nivel 3**; existe al menos un usuario con permiso de Alta de inspeccion; existe al menos una **Lista de Verificación** configurada. El calendario de inspecciones está accesible.  **Navegación:** 1. Desde la aplicación web de CetApp GO, navegar al módulo donde se muestran las inspecciones programadas (vista de calendario o lista de inspecciones). 2. Localizar y hacer clic en la acción **“Programar inspección”** para abrir el modal de **Alta de Programación de Inspección**.  **Acción:** 1. En el modal **Alta de Programación de Inspección**, seleccionar un valor válido en **Jerarquía Nivel 1** usando la lista desplegable con buscador interno. 2. Verificar que las opciones de **Jerarquía Nivel 2** se filtren en función de la **Jerarquía Nivel 1** seleccionada y elegir una opción válida. 3. Verificar que las opciones de **Jerarquía Nivel 3** se filtren en función de la **Jerarquía Nivel 2** seleccionada y elegir una opción válida. 4. Dejar el campo **Dirección** vacío (opcional). 5. Completar **Fecha programada** con una fecha válida. 6. Completar **Horario de inicio** y **Horario de fin** de forma tal que el horario de inicio sea anterior al horario de fin y ambos se encuentren dentro del mismo día (no antes de 00:00 ni después de 23:59). 7. En el campo **Inspector**, mantener la opción **“Sin asignar”** (valor por defecto). 8. No seleccionar ninguna **Lista de Verificación** (dejar el campo vacío, es opcional). 9. Dejar el campo **Descripción / Notas** vacío (opcional). 10. Presionar el botón **Guardar**.  **Aserción (Validación):** - Verificar que no se muestren mensajes de error de validación. - Verificar que el modal de **Alta de Programación de Inspección** se cierre. - Verificar que la nueva programación de inspección se muestre en el calendario, en la fecha y franja horaria seleccionadas. - Verificar que la programación tenga asociadas las **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3** seleccionadas, y que el **Inspector** se muestre como **Sin asignar**.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-002 | Validación de obligatoriedad de Jerarquías | Asegurar que no se permita guardar la **Alta de Programación de Inspección** si no se completan las tres jerarquías obligatorias. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. El módulo de inspecciones programadas está disponible.  **Navegación:** 1. Acceder al módulo donde se muestra el calendario o listado de inspecciones. 2. Hacer clic en la acción **“Programar inspección”** para abrir el modal de **Alta de Programación de Inspección**.  **Acción:** 1. Sin seleccionar **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3**, completar el resto de los campos obligatorios: **Fecha programada**, **Horario de inicio**, **Horario de fin** válidos y dentro del día. 2. Mantener **Inspector = “Sin asignar”**, no seleccionar **Lista de Verificación** y dejar **Dirección** y **Descripción / Notas** vacíos. 3. Presionar **Guardar**. 4. Repetir la prueba seleccionando solo **Jerarquía Nivel 1** y dejando vacíos **Jerarquía Nivel 2** y **Jerarquía Nivel 3**, y volver a presionar **Guardar**. 5. Repetir otra vez seleccionando **Jerarquía Nivel 1** y **Jerarquía Nivel 2**, dejando vacío **Jerarquía Nivel 3**, y volver a presionar **Guardar**.  **Aserción (Validación):** - En todos los intentos, verificar que el sistema:   - No permita guardar la programación de inspección.   - Muestre mensajes de error de validación indicando que las jerarquías son obligatorias (para los campos faltantes: **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3**).   - No se cree ni visualice una nueva programación en el calendario.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-003 | Filtrado dependiente de Jerarquías | Verificar que la selección de **Jerarquía Nivel 1** filtre correctamente las opciones de **Jerarquía Nivel 2**, y que la selección de **Jerarquía Nivel 2** filtre las opciones de **Jerarquía Nivel 3**. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Existen datos maestros suficientes para tener múltiples combinaciones de **Jerarquía Nivel 1, Jerarquía Nivel 2 y Jerarquía Nivel 3**.  **Navegación:** 1. Ir al módulo de calendario/listado de inspecciones. 2. Hacer clic en **“Programar inspección”** para abrir el modal de **Alta de Programación de Inspección**.  **Acción:** 1. Abrir la lista desplegable **Jerarquía Nivel 1** y seleccionar un valor específico. 2. Abrir la lista desplegable **Jerarquía Nivel 2** y observar que solo se muestren opciones compatibles con la **Jerarquía Nivel 1** elegida. Seleccionar un valor. 3. Abrir la lista **Jerarquía Nivel 3** y comprobar que solo se muestren opciones compatibles con la **Jerarquía Nivel 2** seleccionada. 4. Cambiar el valor de **Jerarquía Nivel 1** por otro diferente. 5. Verificar que la lista de **Jerarquía Nivel 2** se actualice y solo muestre opciones correspondientes a la nueva **Jerarquía Nivel 1**. 6. Seleccionar una nueva **Jerarquía Nivel 2** y verificar que la lista **Jerarquía Nivel 3** se actualice en consecuencia.  **Aserción (Validación):** - Verificar que después de cambiar **Jerarquía Nivel 1**, las opciones de **Jerarquía Nivel 2** se filtren y no aparezcan valores que no correspondan a la jerarquía seleccionada. - Verificar que después de cambiar **Jerarquía Nivel 2**, las opciones de **Jerarquía Nivel 3** se filtren y no aparezcan valores que no correspondan a esa combinación. - No deben quedar opciones que no tengan relación con la jerarquía padre.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-004 | Validación de horarios (inicio < fin y dentro de 00:00–23:59) | Validar que el sistema aplique correctamente las reglas de horarios: inicio anterior al fin y ambos dentro del rango permitido (no antes de 00:00 ni después de 23:59), bloqueando el guardado cuando no se cumplan. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Existen jerarquías válidas.  **Navegación:** 1. Ingresar al módulo de inspecciones programadas. 2. Abrir el modal **Alta de Programación de Inspección** mediante la acción **“Programar inspección”**.  **Acción:** 1. Completar correctamente las jerarquías **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3**. 2. Caso A (inicio >= fin):   - Completar **Fecha programada** válida.   - Ingresar **Horario de inicio** mayor o igual al **Horario de fin** (por ejemplo, inicio 15:00, fin 14:00).   - Presionar **Guardar**. 3. Caso B (fuera de rango diario):   - Corregir horarios para que inicio sea menor que fin pero colocar alguno fuera del rango permitido (por ejemplo: inicio 23:59 y fin 24:30, o inicio -01:00 y fin 01:00, según cómo lo permita la UI).   - Presionar **Guardar**. 4. Caso C (válido):   - Ajustar **Horario de inicio** y **Horario de fin** a un rango válido, por ejemplo inicio 10:00 y fin 11:00, ambos dentro de 00:00–23:59.   - Presionar **Guardar**.  **Aserción (Validación):** - Caso A y B:   - El sistema debe mostrar un mensaje de error de validación indicando que el horario es inválido (inicio no puede ser posterior o igual al fin, o que no se puede programar antes de 00:00 ni después de 23:59).   - No debe permitir guardar ni crear la programación. - Caso C:   - No se deben mostrar mensajes de error de horarios.   - La programación debe crearse correctamente y aparecer en el calendario en la franja horaria seleccionada.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-005 | Cálculo de duración estimada según horarios | Verificar que la **duración estimada** se muestre de forma automática según los horarios ingresados. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Hay jerarquías válidas.  **Navegación:** 1. Abrir el módulo de inspecciones. 2. Hacer clic en **“Programar inspección”** para abrir el modal **Alta de Programación de Inspección**.  **Acción:** 1. Seleccionar una combinación válida de **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3**. 2. Ingresar una **Fecha programada** válida. 3. Ingresar **Horario de inicio** y **Horario de fin** válidos (por ejemplo, inicio 10:00, fin 11:30). 4. Observar el campo o texto que muestre la **duración estimada**. 5. Modificar los horarios (por ejemplo, inicio 09:00, fin 10:00) y volver a observar la **duración estimada**.  **Aserción (Validación):** - Verificar que, al ingresar **Horario de inicio** y **Horario de fin**, el sistema muestre la **duración estimada** de forma automática. - Verificar que, al modificar los horarios, se actualice la **duración estimada** acorde a la nueva diferencia entre inicio y fin. - La **duración estimada** no debe mostrarse como válida si los horarios son inválidos (o bien debe ir acompañada del mensaje de error de horarios).  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-006 | Validación de disponibilidad de Inspector (inspector ocupado) | Comprobar que, al seleccionar un **Inspector** que ya tiene otra inspección programada superpuesta total o parcialmente en fecha y rango horario, el sistema no permita guardar y muestre un mensaje de error de conflicto de horario. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Existe al menos una **programación de inspección** ya creada para un **Inspector** específico en una determinada **Fecha programada** y franja horaria. El **Inspector** tiene permiso de Alta de inspeccion.  **Navegación:** 1. Ir al módulo donde se visualizan las inspecciones programadas. 2. Abrir el modal **Alta de Programación de Inspección** con la acción **“Programar inspección”**.  **Acción:** 1. Seleccionar una combinación válida de **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3** que incluya al mismo **Inspector** que ya tiene una inspección agendada. 2. Ingresar la misma **Fecha programada** que la inspección existente. 3. Ingresar un rango de **Horario de inicio** y **Horario de fin** que se superponga total o parcialmente con la franja horaria de la inspección ya programada (por ejemplo, inspección existente 10:00–11:00, nueva inspección 10:30–11:30). 4. En el campo **Inspector**, seleccionar explícitamente al mismo **Inspector** ocupado. 5. Presionar **Guardar**.  **Aserción (Validación):** - Verificar que el sistema:   - No permita guardar la nueva programación de inspección.   - Muestre un mensaje de error informando el conflicto de horario por superposición total o parcial con otra inspección del mismo inspector.   - No se cree una nueva programación en el calendario para ese intervalo horario.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-007 | Programación válida con Inspector “Sin asignar” | Verificar que se pueda crear una programación de inspección válida dejando el **Inspector** en la opción **“Sin asignar”**. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Jerarquías disponibles.  **Navegación:** 1. Acceder al módulo de inspecciones. 2. Abrir el modal **Alta de Programación de Inspección** mediante **“Programar inspección”**.  **Acción:** 1. Seleccionar **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3** válidas. 2. Ingresar **Fecha programada** y horarios válidos y no superpuestos con otras inspecciones. 3. Mantener el campo **Inspector** en la opción por defecto **“Sin asignar”**. 4. No seleccionar **Lista de Verificación**, y dejar **Dirección** y **Descripción / Notas** vacíos. 5. Presionar **Guardar**.  **Aserción (Validación):** - Verificar que la programación se cree con éxito. - Verificar en el detalle de la programación que el **Inspector** figure como **Sin asignar**. - Verificar que la programación aparece en el calendario en la fecha y horario configurados.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-008 | Identificación de Inspector contratista | Verificar que los usuarios con la opción **“¿Es contratista?”** activa se muestren en la lista **Inspector** con el cartel **“Contratista”** y el nombre de la **empresa a la que pertenece**. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Existe al menos un usuario configurado como **Inspector** con la opción **“¿Es contratista?”** activa, con empresa asociada.  **Navegación:** 1. Ingresar al módulo de inspecciones. 2. Abrir el modal **Alta de Programación de Inspección** usando la acción **“Programar inspección”**.  **Acción:** 1. Seleccionar **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3** que incluyan a ese **Inspector contratista**. 2. Abrir la lista desplegable **Inspector** con el buscador interno. 3. Buscar al Inspector contratista por nombre.  **Aserción (Validación):** - Verificar que, en la lista de **Inspector**, ese usuario se muestre con un identificador visual:   - Un cartel con el texto **“Contratista”**.   - El nombre de la **empresa a la que pertenece**. - Verificar que la diferencia visual entre inspectores internos y contratistas externos sea clara.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-009 | Impacto de la Lista de Verificación en el nombre automático de la inspección | Verificar que, al seleccionar una **Lista de Verificación**, el **nombre de la inspección** se genere automáticamente usando el nombre de la lista seleccionada, y que cuando no se seleccione ninguna lista, se utilice el valor de **Jerarquía Nivel 1**. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**. Existen varias **Listas de Verificación** y jerarquías configuradas.  **Navegación:** 1. Entrar al módulo de inspecciones. 2. Abrir el modal **Alta de Programación de Inspección** con **“Programar inspección”**.  **Acción:** 1. Caso A – Sin Lista de Verificación:   - Completar **Jerarquía Nivel 1, Jerarquía Nivel 2, Jerarquía Nivel 3** válidas.   - Ingresar **Fecha programada**, **Horario de inicio** y **Horario de fin** válidos.   - Mantener **Inspector = “Sin asignar”**.   - No seleccionar ninguna **Lista de Verificación**.   - Guardar la programación.   - Abrir el **detalle de la programación** y observar el **nombre de la inspección**. 2. Caso B – Con Lista de Verificación:   - Repetir el flujo de alta creando una nueva programación, esta vez seleccionando una **Lista de Verificación** específica cuyo nombre sea claramente identificable.   - Guardar la programación.   - Abrir el **detalle de la programación** y observar el **nombre de la inspección**.  **Aserción (Validación):** - Caso A:   - Verificar que el **nombre de la inspección** coincida con el valor de la **Jerarquía Nivel 1** seleccionada. - Caso B:   - Verificar que el **nombre de la inspección** sea exactamente el **nombre de la Lista de Verificación** seleccionada. - Confirmar que el **nombre de la inspección** no es editable en el flujo de alta.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-010 | Edición de programación de inspección con validaciones | Verificar que, al editar una programación de inspección, solo se puedan modificar los campos permitidos, que se ejecuten nuevamente todas las validaciones y que la actualización se refleje en el calendario. | **Precondiciones:** Usuario con permisos de edición sobre programaciones de inspección y permiso **“Programar Inspecciones”**, logueado en **CetApp GO - Test 1**. Existe una **programación de inspección** ya creada en estado editable (no Cancelada).  **Navegación:** 1. Ir a la vista de calendario o listado de inspecciones. 2. Localizar una inspección programada y tocarla para ver el **detalle de la programación**.  **Acción:** 1. Verificar que se muestren habilitadas las acciones **Guardar cambios** y **Cancelar programación y Volver**. 2. Modificar los campos editables permitidos:   - Cambiar **Fecha programada**.   - Cambiar **Horario de inicio** y **Horario de fin** a valores válidos.   - Cambiar el **Inspector** (por ejemplo, de **Sin asignar** a un inspector, o de un inspector a **Sin asignar**).   - Modificar **Dirección**.   - Modificar **Descripción**.   - Modificar la **Lista de verificación** (filtrada según las jerarquías asociadas). 3. Intentar ingresar un horario inválido (inicio mayor que fin) y presionar **Guardar**. 4. Corregir los horarios a valores válidos y presionar **Guardar** de nuevo.  **Aserción (Validación):** - Verificar que las **jerarquías asociadas** no sean editables en el formulario de edición. - Verificar que, al intentar guardar con horarios inválidos, el sistema muestre mensajes de validación y no guarde los cambios. - Verificar que, al guardar con datos válidos, se actualicen correctamente los datos de la programación y que los cambios se reflejen en el calendario (nueva fecha y franja horaria). - Verificar que las validaciones de disponibilidad de **Inspector** y horarios se apliquen también en la edición.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-011 | Cancelar programación desde distintos estados permitidos | Verificar que una programación de inspección en estados **Sin asignar**, **Asignada** o **Pausada** pueda pasar al estado **Cancelada**, que se muestre la confirmación y que se apliquen los impactos visuales y restricciones. | **Precondiciones:** Usuario con permisos de edición y de **Cancelar programación**, logueado en **CetApp GO - Test 1**. Existen programaciones de inspección en estado **Sin asignar**, **Asignada** y **Pausada**.  **Navegación:** 1. Ingresar al módulo de calendario o listado de inspecciones. 2. Localizar una inspección en estado **Sin asignar** y abrir el **detalle de la programación**.  **Acción:** 1. Presionar el botón **“Cancelar programación”**. 2. Verificar que el sistema muestre un **mensaje de confirmación** solicitando validar la cancelación. 3. Confirmar la cancelación. 4. Repetir los pasos 1–3 para una inspección en estado **Asignada** y otra en estado **Pausada**.  **Aserción (Validación):** - En todos los casos, verificar que:   - La inspección cambie su estado a **Cancelada**.   - La inspección deje de estar disponible para ejecución.   - En el calendario, la inspección en estado **Cancelada** se visualice con **color rojo**.   - La inspección en estado **Cancelada** **no pueda ser editada** (las acciones de edición deben estar inhabilitadas o no disponibles). - Verificar que, si se cancela el cuadro de confirmación, no se modifique el estado de la inspección.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-012 | Acción “Volver” en alta sin guardar cambios | Verificar que al presionar **Volver** durante el flujo de **Alta de Programación de Inspección**, el sistema muestre un mensaje de confirmación y permita cerrar el modal sin guardar cambios. | **Precondiciones:** Usuario con permiso **“Programar Inspecciones”** logueado en **CetApp GO - Test 1**.  **Navegación:** 1. Ir al módulo de inspecciones. 2. Abrir el modal **Alta de Programación de Inspección** con la acción **“Programar inspección”**.  **Acción:** 1. Completar parcialmente el formulario de alta (por ejemplo, seleccionar alguna jerarquía y completar una **Fecha programada**). 2. Presionar el botón **Volver**. 3. En el mensaje de confirmación que se muestre, elegir la opción de confirmar el cierre sin guardar. 4. Volver a abrir el modal de **Alta de Programación de Inspección**.  **Aserción (Validación):** - Verificar que al presionar **Volver** se muestre un **mensaje de confirmación** (mensaje de validación para salir sin guardar). - Verificar que, al confirmar el cierre, el modal se cierre y no se genere ninguna nueva programación en el calendario. - Verificar que, al reabrir el modal, el formulario esté en blanco (sin los datos que se habían ingresado previamente).  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |
| TC-013 | Visualización en modo solo lectura sin permisos de edición | Verificar que, cuando un usuario no tiene permisos de edición, el detalle de la programación de inspección se muestre en modo **solo lectura** y sin las acciones de **Guardar cambios** ni **Cancelar programación**. | **Precondiciones:** Usuario logueado en **CetApp GO - Test 1** sin permisos de edición sobre programaciones de inspección (pero con acceso de consulta). Existen programaciones de inspección creadas.  **Navegación:** 1. Acceder al módulo de calendario/listado de inspecciones. 2. Tocar una inspección para abrir el **detalle de la programación**.  **Acción:** 1. Observar la interfaz del detalle de la programación. 2. Intentar interactuar con los campos de la programación (Fecha programada, Horario de inicio, Horario de fin, Inspector, Dirección, Descripción, Lista de verificación).  **Aserción (Validación):** - Verificar que los campos se muestren en modo **solo lectura** (no editables). - Verificar que no estén disponibles las acciones de **Guardar cambios** ni el botón **“Cancelar programación”**. - Verificar que, en caso de existir la acción **Volver**, permita solo salir del detalle sin realizar cambios.  **Evidencia:** Generá el Trace de Playwright y capturas de pantalla en caso de error. |

